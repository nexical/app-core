/*
Theme Contract: Layout Variables
Themes can enforce different spatial densities (Cozy, Compact, Spacious)
*/
:root {
    --sidebar-width: 18.75rem;
    /* w-[300px] */
    --header-height: 3.5rem;
    /* h-14 */
}

@import "tw-animate-css";

@plugin "tailwindcss-animate";

@custom-variant dark (&:is(.dark *));

@theme inline {
    /* Semantics - Mapping abstract concepts to concrete primitives */
    --color-background: var(--background);
    --color-foreground: var(--foreground);

    --color-sidebar-ring: var(--sidebar-ring);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar: var(--sidebar);

    --color-chart-5: var(--chart-5);
    --color-chart-4: var(--chart-4);
    --color-chart-3: var(--chart-3);
    --color-chart-2: var(--chart-2);
    --color-chart-1: var(--chart-1);

    --color-ring: var(--ring);
    --color-input: var(--input);
    --color-border: var(--border);
    --color-destructive: var(--destructive);
    --color-destructive-foreground: var(--destructive-foreground);
    --color-accent-foreground: var(--accent-foreground);
    --color-accent: var(--accent);
    --color-muted-foreground: var(--muted-foreground);
    --color-muted: var(--muted);
    --color-secondary-foreground: var(--secondary-foreground);
    --color-secondary: var(--secondary);
    --color-primary-foreground: var(--primary-foreground);
    --color-primary: var(--primary);
    --color-popover-foreground: var(--popover-foreground);
    --color-popover: var(--popover);
    --color-card-foreground: var(--card-foreground);
    --color-card: var(--card);

    --radius-sm: calc(var(--radius) - 4px);
    --radius-md: calc(var(--radius) - 2px);
    --radius-lg: var(--radius);
    --radius-xl: calc(var(--radius) + 4px);
    --radius-2xl: calc(var(--radius) + 8px);
    --radius-3xl: calc(var(--radius) + 12px);
    --radius-4xl: calc(var(--radius) + 16px);
}

@layer base {
    :root {
        --radius: 0.5rem;

        /* Page Background */
        --page-background-image: radial-gradient(circle at 50% 0%, hsl(210, 40%, 98%), hsl(210, 40%, 94%));

        /* Primitive Palette: Clean Slate */
        --background: hsl(210 40% 98%);
        --foreground: hsl(222.2 84% 4.9%);

        --card: hsl(0 0% 100%);
        --card-foreground: hsl(222.2 84% 4.9%);

        --popover: hsl(0 0% 100%);
        --popover-foreground: hsl(222.2 84% 4.9%);

        --primary: hsl(222.2 47.4% 11.2%);
        --primary-foreground: hsl(210 40% 98%);

        --secondary: hsl(210 40% 96.1%);
        --secondary-foreground: hsl(222.2 47.4% 11.2%);

        --muted: hsl(210 40% 96.1%);
        --muted-foreground: hsl(215.4 16.3% 46.9%);

        --accent: hsl(210 40% 96.1%);
        --accent-foreground: hsl(222.2 47.4% 11.2%);

        --destructive: hsl(0 84.2% 60.2%);
        --destructive-foreground: hsl(210 40% 98%);

        --border: hsl(240 5.9% 90%);
        --input: hsl(240 5.9% 90%);
        --ring: hsl(240 10% 3.9%);

        --chart-1: hsl(173 58% 39%);
        --chart-2: hsl(12 76% 61%);
        --chart-3: hsl(197 37% 24%);
        --chart-4: hsl(43 74% 66%);
        --chart-5: hsl(27 87% 67%);

        /* Sidebar */
        --sidebar: hsl(0 0% 98%);
        --sidebar-foreground: hsl(240 5.3% 26.1%);
        --sidebar-primary: hsl(240 5.9% 10%);
        --sidebar-primary-foreground: hsl(0 0% 98%);
        --sidebar-accent: hsl(240 4.8% 95.9%);
        --sidebar-accent-foreground: hsl(240 5.9% 10%);
        --sidebar-border: hsl(220 13% 91%);
        --sidebar-ring: hsl(217.2 91.2% 59.8%);
    }

    .dark {
        --radius: 0.5rem;

        /* Page Background */
        --page-background-image: radial-gradient(circle at 50% 0%, hsl(240, 10%, 10%), hsl(240, 10%, 3.9%));

        /* Primitive Palette: Deep Space -> Neutral Grey */
        --background: hsl(240 10% 3.9%);
        --foreground: hsl(0 0% 98%);

        --card: hsl(240 10% 3.9%);
        --card-foreground: hsl(0 0% 98%);

        --popover: hsl(240 10% 3.9%);
        --popover-foreground: hsl(0 0% 98%);

        --primary: hsl(0 0% 98%);
        --primary-foreground: hsl(240 5.9% 10%);

        --secondary: hsl(240 3.7% 15.9%);
        --secondary-foreground: hsl(0 0% 98%);

        --muted: hsl(240 3.7% 15.9%);
        --muted-foreground: hsl(240 5% 64.9%);

        --accent: hsl(240 3.7% 15.9%);
        --accent-foreground: hsl(0 0% 98%);

        --destructive: hsl(0 62.8% 30.6%);
        --destructive-foreground: hsl(0 0% 98%);

        --border: hsl(240 3.7% 15.9%);
        --input: hsl(240 3.7% 15.9%);
        --ring: hsl(240 4.9% 83.9%);

        --chart-1: hsl(220 70% 50%);
        --chart-2: hsl(160 60% 45%);
        --chart-3: hsl(30 80% 55%);
        --chart-4: hsl(280 65% 60%);
        --chart-5: hsl(340 75% 55%);

        /* Sidebar */
        --sidebar: hsl(240 5.9% 10%);
        --sidebar-foreground: hsl(240 4.8% 95.9%);
        --sidebar-primary: hsl(224.3 76.3% 48%);
        --sidebar-primary-foreground: hsl(0 0% 100%);
        --sidebar-accent: hsl(240 3.7% 15.9%);
        --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
        --sidebar-border: hsl(240 3.7% 15.9%);
        --sidebar-ring: hsl(217.2 91.2% 59.8%);
    }
}


/* 
GENERIC DESIGN VOCABULARY - TOTAL ABSTRACTION
---------------------------------------------
A complete vocabulary for all visual properties. 
NO component should define color, padding, or borders.
*/

@layer base {
    * {
        @apply border-border;
    }

    /* 
    Implementation Detail: 
    Background images are now handled via the --page-background-image variable 
    defined in each theme file, allowing for complete isolation.
    */
    body {
        @apply bg-background text-foreground;
        background-image: var(--page-background-image);
        background-attachment: fixed;
    }
}




/* --- Typography --- */

@utility text-heading-xl {
    @apply text-3xl font-bold tracking-tight text-foreground;
}

@utility text-heading-lg {
    @apply text-2xl font-bold tracking-tight text-foreground;
}

@utility text-heading-md {
    @apply text-lg font-semibold leading-none tracking-tight text-foreground;
}

@utility text-body {
    @apply text-base text-foreground;
}

@utility text-body-sm {
    @apply text-sm font-medium text-foreground;
}

@utility text-subtle {
    @apply text-sm text-muted-foreground;
}

@utility text-subtle-xs {
    @apply text-xs text-muted-foreground;
}

@utility text-link {
    @apply text-sm text-primary hover:underline cursor-pointer transition-colors;
}

@utility text-link-subtle {
    @apply text-xs text-muted-foreground hover:underline cursor-pointer;
}

@utility text-code {
    @apply font-mono bg-muted px-1 py-0.5 rounded text-sm font-bold;
}

@utility text-highlight {
    @apply font-medium text-foreground;
}

/* --- Surfaces & Containers --- */

/* App Shell Sections */
@utility container-sidebar {
    @apply bg-muted/20 border-r border-border;
}

@utility container-header {
    @apply bg-background/80 backdrop-blur-sm border-b border-border;
    /* Use surface-header abstractly */
}

@utility container-page-content {
    @apply p-8 max-w-5xl mx-auto;
}

/* Panels */
@utility surface-panel {
    @apply bg-background/60 backdrop-blur-xl shadow-xl;
}

.dark .surface-panel {
    @apply shadow-2xl backdrop-blur-xl;
    background-color: hsl(240 10% 8% / 0.65);
}

:root:not(.dark) .surface-panel {
    @apply bg-white/70 shadow-lg;
}

/* Floating Elements (sheets, dialogs) */
@utility surface-overlay {
    @apply surface-panel shadow-2xl;
}

/* Internal Items */
@utility surface-item {
    @apply bg-card/50 border border-border/50 rounded-lg p-3 hover:bg-muted/50 transition-colors;
}

@utility surface-item-bordered {
    @apply border-b border-border p-4 bg-background/20;
}

/* Admin/Dashboard Containers */
@utility container-admin-table {
    @apply rounded-md border bg-background/50 backdrop-blur-sm p-5;
}

@utility container-admin-toolbar {
    @apply p-4 border-b border-border/50;
}

/* --- Inputs & Forms --- */

@utility input-field {
    @apply flex h-9 w-full rounded-md border border-input bg-background/30 px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50;
    @apply backdrop-blur-md focus:border-primary/50 focus:ring-primary/20;
}

.dark .input-field {
    @apply bg-black/20;
}

:root:not(.dark) .input-field {
    @apply bg-white/50;
}

@utility input-field-lg {
    @apply input-field h-12 text-lg px-4;
}

@utility input-label {
    @apply text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70;
}

@utility form-container {
    @apply space-y-4;
}

@utility form-group {
    @apply space-y-2;
}

/* --- Actions (Buttons) --- */

@utility btn-base {
    @apply inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 shadow-sm backdrop-blur-md;
}

@utility btn-primary {
    @apply btn-base bg-primary text-primary-foreground hover:bg-primary/90 shadow h-9 px-4 py-2;
    @apply shadow-md;
    /* Glass */
}

.btn-primary:hover {
    @apply shadow-lg shadow-primary/20;
}

@utility btn-secondary {
    @apply btn-base bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 px-4 py-2;
    @apply bg-background/40 hover:bg-accent/20;
    /* Glass overrides */
}

@utility btn-danger {
    @apply btn-base bg-destructive text-destructive-foreground hover:bg-destructive/90 h-9 px-4 py-2 shadow-sm;
    @apply bg-red-500/10 border border-red-500/20 text-red-500 hover:bg-red-500/20;
    /* Glass overrides */
}

@utility btn-success {
    @apply btn-base bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 hover:bg-emerald-500/20 h-9 px-4 py-2;
}

@utility btn-ghost {
    @apply btn-base hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 shadow-none;
}

@utility btn-link {
    @apply text-primary underline-offset-4 hover:underline h-9 px-4 py-2 bg-transparent shadow-none;
}

@utility btn-icon {
    @apply h-9 w-9 p-0 rounded-full hover:bg-muted/50 transition-colors flex items-center justify-center;
}

@utility btn-icon-sm {
    @apply h-8 w-8 p-0 rounded-md hover:bg-muted/50;
}

/* --- Feedback & Badges --- */

@utility badge-base {
    @apply inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;
}

@utility badge-primary {
    @apply badge-base border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80;
}

@utility badge-secondary {
    @apply badge-base border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80;
}

@utility badge-outline {
    @apply badge-base text-foreground;
}

@utility feedback-success-card {
    @apply p-4 rounded-lg bg-green-500/10 border border-green-500/20 text-center text-green-600;
}

@utility feedback-error-card {
    @apply p-4 rounded-lg bg-red-500/10 border border-red-500/20 text-red-500 text-sm flex flex-col gap-2;
}

@utility feedback-error-text {
    @apply text-xs text-red-500 font-medium;
}

/* --- Decorations --- */

@utility decoration-orb {
    @apply absolute w-[50%] h-[50%] rounded-full blur-[120px] pointer-events-none;
}

@utility orb-primary {
    @apply decoration-orb bg-primary/20 top-[-10%] left-[-10%] dark:bg-purple-900/20;
}

@utility orb-secondary {
    @apply decoration-orb bg-secondary/20 bottom-[-10%] right-[-10%] dark:bg-blue-900/20;
}

@utility decoration-divider {
    @apply h-px bg-border w-full;
}

/* --- Icons & Media --- */
@utility icon-xs {
    @apply size-3;
}

@utility icon-sm {
    @apply size-4;
}

@utility icon-md {
    @apply size-6;
}

@utility icon-lg {
    @apply size-8;
}

@utility icon-xl {
    @apply size-10;
}

@utility icon-2xl {
    @apply size-12;
}

@utility icon-muted {
    @apply text-muted-foreground opacity-70;
}

/* --- Layout & Spacing Helpers --- */

@utility layout-centered {
    @apply flex items-center justify-center;
}

@utility layout-between {
    @apply flex items-center justify-between;
}

@utility layout-stack {
    @apply flex flex-col;
}

/* Spacing Standards */
@utility gap-xs {
    @apply gap-1;
}

@utility gap-sm {
    @apply gap-2;
}

@utility gap-md {
    @apply gap-4;
}

@utility gap-lg {
    @apply gap-6;
}

@utility gap-xl {
    @apply gap-8;
}

@utility p-container-sm {
    @apply p-4;
}

@utility p-container-md {
    @apply p-6;
}

@utility p-container-lg {
    @apply p-8;
}

/* Common Widths/Heights */
@utility w-dialog-sm {
    @apply w-full max-w-sm;
}

@utility w-dialog-md {
    @apply w-full max-w-md;
}

@utility w-dialog-lg {
    @apply w-full max-w-lg;
}

/* --- Avatars --- */
@utility avatar-sm {
    @apply h-8 w-8 text-xs;
}

@utility avatar-md {
    @apply h-10 w-10 text-sm;
}

@utility avatar-lg {
    @apply h-16 w-16 text-xl;
}

@utility avatar-xl {
    @apply h-24 w-24 text-3xl;
}

/* --- DETAILED LAYOUT ABSTRACTIONS --- */

/* Shell / Structural Dividers */
@utility border-divider-b {
    @apply border-b border-border;
}

@utility border-divider-t {
    @apply border-t border-border;
}

@utility border-divider-base {
    @apply border border-border;
}

/* Container Padding */
@utility p-container-xxs {
    @apply p-1;
}

@utility p-container-xs {
    @apply p-2;
}

@utility p-container-base {
    @apply p-4;
}

@utility px-header {
    @apply px-4;
}

@utility px-sidebar {
    @apply px-2;
}

@utility py-sidebar {
    @apply py-4;
}

/* Margins & Spacing */
@utility m-page-title {
    @apply mb-6;
}

@utility m-section {
    @apply mb-8;
}

@utility m-component {
    @apply mb-4;
}

@utility m-item {
    @apply mb-2;
}

@utility space-y-nav {
    @apply space-y-1;
}

@utility space-y-content {
    @apply space-y-4;
}

@utility space-y-group {
    @apply space-y-2;
}

/* --- COMPONENT SPECIFIC ABSTRACTIONS --- */

/* Buttons Sizes */
@utility btn-dims-default {
    @apply h-9 px-4 py-2;
}

@utility btn-dims-sm {
    @apply h-8 px-3;
}

@utility btn-dims-lg {
    @apply h-10 px-6;
}

/* Element Shapes */
@utility shape-rounded-md {
    @apply rounded-md;
}

@utility shape-rounded-full {
    @apply rounded-full;
}

@utility shape-rounded-xl {
    @apply rounded-xl;
}

/* Element States */
@utility state-hover-bg {
    @apply transition-colors hover:bg-muted/50;
}

@utility state-hover-text {
    @apply transition-colors hover:text-foreground;
}

/* Text Extras */
@utility text-meta {
    @apply text-xs text-muted-foreground;
}

@utility text-nav-item {
    @apply text-sm font-medium text-foreground/60 transition-colors hover:text-foreground;
}

@utility text-nav-item-active {
    @apply text-sm font-medium text-foreground;
}

/* Shell Specifics */
@utility shell-sidebar-base {
    @apply bg-muted/20 border-r border-border;
    /* Replaces visual parts of shell-sidebar */
}

@utility shell-nav-item {
    @apply flex items-center rounded-md px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground;
}

@utility shell-bg-root {
    @apply bg-background;
}

@utility admin-header-bg {
    @apply border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60;
}

/* --- DRAWER & SHEET SEMANTICS --- */
@utility drawer-top-base {
    @apply top-0 mb-24 max-h-[80vh] rounded-b-lg border-b;
}

@utility drawer-bottom-base {
    @apply bottom-0 mt-24 max-h-[80vh] rounded-t-lg border-t;
}

@utility drawer-handle-base {
    @apply bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full;
}

/* --- TOAST & NOTIFICATION SEMANTICS --- */
@utility toast-root {
    @apply group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg;
}

@utility toast-btn-primary {
    @apply group-[.toast]:bg-primary group-[.toast]:text-primary-foreground;
}

@utility toast-btn-cancel {
    @apply group-[.toast]:bg-muted group-[.toast]:text-muted-foreground;
}

/* --- MISC OVERRIDES --- */
@utility rounded-top-lg {
    @apply rounded-t-lg;
}

@utility rounded-bottom-lg {
    @apply rounded-b-lg;
}

@utility size-indicator {
    @apply h-2 w-2;
}

@utility border-transparent-l {
    @apply border-l-transparent;
}

@utility border-transparent-t {
    @apply border-t-transparent;
}

/* --- FORM & INPUT SPECIFICS --- */
@utility px-input-base {
    @apply px-3;
}

@utility py-input-base {
    @apply py-2;
}

@utility py-input-sm {
    @apply py-1;
}

@utility px-select-label {
    @apply pl-8 pr-2 py-1.5;
}

@utility min-h-textarea {
    @apply min-h-[60px];
}

/* --- BUTTON INTERNALS --- */
@utility gap-btn-icon {
    @apply gap-1.5;
}

/* --- LAYOUT UTILITIES --- */
@utility px-header-outer {
    @apply px-6;
}

@utility mx-separator {
    @apply -mx-1;
}

@utility my-separator {
    @apply my-1;
}

@utility scroll-my-select {
    @apply scroll-my-1;
}

/* --- COMPONENT INTERNALS --- */
@utility px-btn-icon {
    @apply px-3;
}

@utility px-btn-icon-sm {
    @apply px-2.5;
}

@utility px-btn-icon-lg {
    @apply px-4;
}

@utility w-sidebar-details {
    @apply w-[400px];
}

@utility w-lang-select {
    @apply w-[140px];
}

@utility min-w-select-trigger {
    @apply min-w-[8rem];
}

@utility max-h-select-content {
    @apply max-h-96;
}